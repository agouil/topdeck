<% layout('boilerplate') -%>

<div class="tour">

    <div class="hero background-cover" style="background-image: url('<%= tour.img %>')">
        <div class="gradient"></div>

        <h1><%= tour.name %></h1>
    </div>

    <button id="callRequest" type="button" data-route-id="1"
            class="btn btn-default navbar-btn pull-right">
        Call me with tour
    </button>
    <div class="clearfix"></div>
    <div class="step-container">
    <% tourSteps.forEach(function(step){ %>
        <div class="step step-type-<%= step.type %>" data-lat="<%= step.lat %>" data-lng="<%= step.lng %>">
            <div class="step-bar" data-toggle="collapse" href="#step-details-<%= step.id %>"
                 aria-expanded="false" aria-controls="collapseExample">
                <div class="step-image">
                    <div class="img-circle-border">
                        <div class="img-circle ">
                            <div class="step-icon background-cover" style="background-image: url('<%= step.image %>')"></div>
                        </div>
                    </div>
                </div>
                <div class="step-name">
                    <%= step.name %>
                    <span class="step-distance"></span>

                    <% if (step.type == 'spot') { %>
                        <div class="pull-right voting">
                            <form class="form-inline">
                                <input type="hidden" name="spot-id" value="<%= step.spotId %>" />
                                <input type="hidden" name="step-id" value="<%= step.id %>" />
                                <div class="form-group">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-default">
                                            <i class="up"></i>
                                        </button>
                                        <button type="button" class="btn btn-default">
                                            <i class="fa-chevron-down"></i>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    <% } %>
                </div>
            </div>
            <div class="clearfix"></div>
            <div id="step-details-<%= step.id %>" class="step-details collapse">
                <% if (step.type == 'spot') { %>
                    <%= step.details %>
                <% } else { %>
                    <div class="stop-map-canvas" data-name="<%= step.name %>"
                         data-lat="<%= step.lat %>" data-lng="<%= step.lng %>"></div>
                <% } %>
            </div>
        </div>
    <% }); %>
    </div>
</div>
